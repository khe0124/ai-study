# 배포 체크리스트

AWS EC2 배포 전 확인사항을 체크리스트로 정리했습니다.

## 사전 준비

- [ ] AWS 계정 생성 및 로그인
- [ ] 도메인 구매 또는 기존 도메인 준비
- [ ] Git 레포지토리 접근 권한 확인
- [ ] SSH 키 페어 준비

## 1. EC2 인스턴스 설정

- [ ] Ubuntu 22.04 LTS AMI 선택
- [ ] 적절한 인스턴스 타입 선택 (t3.small 이상 권장)
- [ ] 키 페어 생성 및 다운로드
- [ ] 보안 그룹 설정:
  - [ ] SSH (22) - 내 IP만 허용
  - [ ] HTTP (80) - 모든 위치 허용
  - [ ] HTTPS (443) - 모든 위치 허용
- [ ] 퍼블릭 IP 자동 할당 활성화
- [ ] 인스턴스 시작 및 상태 확인

## 2. 서버 초기 설정

- [ ] SSH 접속 성공
- [ ] 시스템 업데이트 완료
- [ ] 필수 패키지 설치 (curl, wget, git, build-essential)
- [ ] 방화벽 설정 (UFW)
- [ ] 타임존 설정 (선택사항)

## 3. Docker 설치

- [ ] Docker 설치 완료
- [ ] Docker Compose 설치 완료
- [ ] 현재 사용자를 docker 그룹에 추가
- [ ] sudo 없이 docker 명령어 실행 확인
- [ ] Docker 서비스 자동 시작 설정

## 4. 프로젝트 설정

- [ ] 레포지토리 클론 완료
- [ ] .env 파일 생성 및 설정
- [ ] DOMAIN 환경변수 설정
- [ ] Nginx 로그 디렉토리 생성
- [ ] SSL 디렉토리 생성

## 5. 서비스 실행

- [ ] Docker 이미지 빌드 성공
- [ ] 모든 서비스 실행 확인
- [ ] Health check 엔드포인트 응답 확인
- [ ] 로그에 에러 없음 확인

## 6. 도메인 연결

- [ ] DNS A 레코드 추가
- [ ] DNS 전파 확인 (nslookup/dig)
- [ ] .env 파일의 DOMAIN 값 업데이트
- [ ] 도메인으로 접속 테스트

## 7. HTTPS 설정

- [ ] Certbot 설치
- [ ] SSL 인증서 발급 성공
- [ ] Nginx HTTPS 설정 활성화
- [ ] HTTP → HTTPS 리다이렉트 작동 확인
- [ ] SSL 인증서 자동 갱신 설정
- [ ] 보안 헤더 확인

## 8. 최종 확인

- [ ] HTTPS 연결 정상 작동
- [ ] Frontend 접속 확인
- [ ] Backend API 접속 확인
- [ ] Health check 엔드포인트 확인
- [ ] WebSocket 연결 테스트 (해당되는 경우)
- [ ] 보안 헤더 확인
- [ ] SSL 인증서 유효성 확인

## 9. 보안 강화 (선택사항)

- [ ] SSH 키 기반 인증만 허용
- [ ] Root 로그인 비활성화
- [ ] 자동 업데이트 설정
- [ ] 로그 모니터링 설정
- [ ] 백업 전략 수립

## 10. 모니터링 및 유지보수

- [ ] 서비스 모니터링 도구 설정 (선택사항)
- [ ] 로그 수집 설정 (선택사항)
- [ ] 알림 설정 (선택사항)
- [ ] 정기 백업 스케줄 설정 (선택사항)

## 문제 해결

배포 중 문제가 발생하면:

1. 로그 확인: `docker compose logs -f`
2. 서비스 상태 확인: `docker compose ps`
3. 네트워크 확인: `docker network ls`
4. 방화벽 확인: `sudo ufw status`
5. 보안 그룹 확인 (AWS 콘솔)

자세한 내용은 [DEPLOYMENT_AWS.md](./DEPLOYMENT_AWS.md)의 트러블슈팅 섹션을 참고하세요.
